# 梦山 系统设计规范 — 协作与救援 (Cooperation & Rescue System Spec)

> **设计目的 (Design Goal)**  
> 定义托举、拉拽、拉上去、背负救援、原地复苏等协作与救援行为，以及互助行为列表与关系门控；与《攀爬与移动》共同构成攀爬协作体验。
> **设计支柱引用**: [互助即玩法](../00_项目核心/02_Pillars_设计支柱.md)
> **关联文档**: [攀爬与移动](01_攀爬与移动.md)、[关系系统](08_关系系统.md)、[状态系统](04_状态系统.md)（待救援/死亡与复活）、[道具系统](05_道具系统.md)
> **更新日期**: 2026-02-07

---

## 1. 挑战模型 (Challenge Model)

### 1.1 阻力来源 (Resistance)
*   [x] **操作精度 (Dexterity)**: 需要精准的支点选择、借力时机与协作配合。
*   [x] **协作协调 (Coordination)**: 托举/拉拽需要与搭档在时空上对齐。
*   [ ] **时间压力 (Time Pressure)**: 可选；部分节点可设计限时借力。
*   [ ] **资源短缺 (Scarcity)**: 不用于核心攀爬；体力/次数限制需谨慎，避免影响核心体验。

### 1.2 核心动词 (Core Verb)
*   **攀爬 (Climbing)**: 抓取支点、位移、借力、失败重试；详见《攀爬与移动》。
*   **互助 (Cooperating)**: 托举、拉拽、借力——必须影响关卡进度或成败，而非仅社交动作。

---

## 2. 体验循环 (Experience Loop)

*   **观察**: 玩家需关注支点分布、搭档状态、协作触发区域。
*   **决策**: 面临「现在攀还是等搭档」「谁来托举/拉拽」等权衡。
*   **行动**: 攀爬输入（抓取/释放）见《攀爬与移动》；托举/拉拽输入（朝向、范围）见下文原子操作。
*   **反馈**: 位移、成功/失败音效与特效；协作成功时明确「我们一起做到了」的成就感。

---

## 3. 验证准则 (Validation Heuristics)

### 3.1 深度验证 (Depth Check)
*   **策略空间**: 熟练玩家能通过路线预判与协作节奏，减少失败次数；新手与熟练玩家的差距可通过「重试成本可控」缓和。
*   **重玩价值**: 同一路线，双人协作 vs 单人、不同搭档，体验不同；隐藏/分支路线需协作才有解法。

### 3.2 节奏验证 (Pacing Check)
*   **压力窗口**: 单段攀爬 3–15 分钟；关键协作节点处压力集中。
*   **释放窗口**: 到达检查点、登顶、协作成功后给予喘息与成就感。

---

## 4. 执行细则 (Execution Details)

### 4.1 协作原子操作 (Atomic Actions)

| 操作名称 | 触发方式 | 前置条件 | 结果 |
| :--- | :--- | :--- | :--- |
| 抓取支点 | 按键/触控 | 在支点范围内 | 角色吸附支点，可进行位移 |
| 释放支点 | 松开 | 已抓取支点 | 脱离支点，可能下落 |
| 借力跳跃 | 按键 | 在借力支点/搭档附近 | 获得额外冲量，到达更高支点 |
| 托举 | 按键+朝向 | 搭档在托举范围内、搭档处于可托举状态 | 搭档获得上升力，协作成功 |
| 拉拽 | 按键+朝向 | 搭档在拉拽范围内、搭档处于可拉拽状态 | 搭档被拉至拉拽者位置，协作成功 |

### 4.2 协作节点与对象状态

*   **协作节点**: 未触发 → [双方进入区域+输入] → 协作成功 / 协作失败（超时/错位）。

### 4.3 互助行为定义 (Cooperation Actions Definition)

游戏中核心互助行为及**关系门控**如下。关系状态参见 [关系系统](08_关系系统.md)（0 陌生人 / 1 邂逅者 / 2 同行者）。

| 序号 | 互助行为 | 说明 | 关系要求 |
| :--- | :--- | :--- | :--- |
| 1 | **拉上去** | 站在高处，对区域内山壁上的玩家执行「拉上去」操作 | 无关系要求 |
| 2 | **响应玩家状态交互** | 根据玩家身上的状态进行交互（如：有刺则帮忙拔出，有火焰则帮忙扑灭等） | 无关系要求 |
| 3 | **使用明显无副作用的道具** | 对他人使用被定义为「明显无副作用」的道具 | 无关系要求 |
| 4 | **系在同一根登山绳索上** | 经二次确认后，与对方系在同一条登山绳索上（类似光遇牵手） | **必须 1（邂逅者）或 2（同行者）** |
| 5 | **使用「综合功效」道具** | 使用可能带来负面效果的综合功效类道具 | **必须 2（同行者）** |
| 6 | **其他互动行为** | 背人、交际舞等与其它玩家互动的行为 | **必须 2（同行者）+ 特定功能开关** |

### 4.4 未定义但可能产生的行为 (Emergent / Out of Scope)

以下行为**当前不被正式定义**为互助行为，但可能因基础规则或物理/交互规则自然产生，需在实现时做边界与风险控制：

| 行为 | 说明 | 备注 |
| :--- | :--- | :--- |
| 蹲下（托举） | 蹲下形成托举支点 | 与「拉上去」区分；是否纳入正式互助待定 |
| 推挤 | 导致其他玩家滑落等 | 需明确是否允许、是否与惩罚/举报挂钩 |
| 丢弃 | 将道具丢弃在其他玩家附近，供其拾取 | 可能产生间接互助或骚扰 |
| 放置 | 将道具放入其他玩家背包 | 涉及背包权限与确认流程；见《道具系统》 |
| 抛掷 | 抛掷道具，可能对其他玩家产生正面/负面影响 | 需与「综合功效」及关系门控对齐 |

### 4.5 交互规则 (Interaction Rules)
*   **规则 1（主线单人可过）**: 主线路段所有节点必须设计为单人可攀爬通过；不得强制陌生人助力才能推进主线。
*   **规则 2（协作节点在隐藏/分支）**: 隐藏/分支路段可设计「单人难以完成、协作才有解法」的节点；托举/拉拽必须影响关卡进度或成败。
*   **规则 3（失败即重试）**: 攀爬失败或协作失败时，玩家可立即重试；挫败感需在可接受范围内（Demo 验证项）。
*   **规则 4（协作反馈明确）**: 协作成功时必须有清晰的视觉、听觉、触觉反馈，强化「我们一起做到了」的归属感。
*   **规则 5（关系门控）**: 需关系 1 或 2 的行为（如系绳）在对方为 0（陌生人）时不可用；需关系 2 或 2+开关 的行为在未达条件时不可用，UI 上应做灰显或提示。

### 4.6 救援行为（与状态系统对接）

*   **背负救援**：队友可将待救援玩家扛在背上，暂停其死亡计时器，但显著增加自身负重与操作难度；背负会增加 Weight_Penalty，占据背负者的体力槽。详见《状态系统》3.4。
*   **原地复苏**：队友在一定范围内可通过使用特定道具（如急救包、治疗包）或执行「救援动作」使待救援玩家回到存活状态；不同倒地原因可要求不同道具：如重伤 → 绷带/急救包；环境导致的昏厥 → 食物/热源/解毒类道具等。复活途径见《进度与复活点》。

### 4.7 PEAK 复苏道具对应（参考）

*   **重伤/摔落倒地**：PEAK 使用绷带 (Bandage) 或急救包 (First Aid Kit) 对倒地队友使用即可复苏；梦山规则一致（绷带/急救包）。
*   **饥饿或疲惫倒地**：PEAK 使用包装餐或 sustaining food 给予倒地队友即可复苏；梦山规则一致（食物/热源/解毒等按倒地原因选用）。
*   **背负**：PEAK 中背负倒地队友会暂停其死亡计时器，背负者变重、攀爬更吃力；梦山规则一致，见 4.6 与《状态系统》3.4。

---

## 5. 与系统架构的映射

| 系统 | 本规范覆盖 |
| :--- | :--- |
| [SYS_COOP] 协作与救援 | 托举、拉拽、拉上去、协作节点、**互助行为列表与关系门控**、背负救援、原地复苏 |
| [SYS_CLIMB] 攀爬与移动 | 借力、支点判定；见《攀爬与移动》 |
| [SYS_RELATION] 关系系统 | 关系状态 0/1/2 作为互助行为的前置条件（见 4.3） |
| [SYS_STATE] 状态系统 | 待救援/死亡状态与救援行为对接；见《状态系统》 |
| [SYS_ROUTE] 路线/关卡 | 主线/分支划分、协作节点配置；见《环境与关卡》 |

---

## 6. 反馈设计（协作与救援）

| 操作 | 视觉 | 听觉 | 触觉（震动） | 其他 |
| :--- | :--- | :--- | :--- | :--- |
| 托举成功 | 托举者做出明显「下蹲托起」动作，被托举者身体略向上抬起并短暂停留在托举者头顶上方，脚下出现轻微扬尘或脚印特效 | 一段短促但有力度的「支撑」音效，叠加轻微的上扬提示音，强调协作成功 | 托举者设备给出一段由弱到强的短震动，被托举者设备给出一次清晰但更柔和的震动 | 反馈时长控制在 `{{COOP_FEEDBACK_MS}}` 毫秒内，与下一次跳跃输入节奏兼容；UI 可在托举成功时在双方头顶短暂显示「托举中」图标 |
| 拉拽成功 | 拉拽者向后略微退步并拉动双手动作，被拉拽者沿一条平滑轨迹贴地/贴面移动到拉拽者身旁，落点姿态稳定 | 「拉扯+落脚」两段式音效：先是绳索/衣物摩擦声，再是落脚声，整体音量略高于环境音 | 双方设备在拉拽开始时同时给出一次中等强度震动，在落点时再给一次短促确认震动 | 落点附近自动做轻微镜头平移或拉近，帮助双方看清最终站位；避免因相机突变造成眩晕 |
| 攀爬跳跃后由队友拉上去 | 被拉玩家在墙面边缘做出「被抓手腕」的动作，上方队友做出明显「向后发力」动画，两人短暂形成一个三角关系姿态 | 合并播放「攀爬跳跃成功」和「拉拽成功」的关键声部：先是落手抓住的清脆声，再是二人稳住的重心声 | 被拉玩家设备在抓住瞬间给一次明显震动，在站稳后渐弱；拉拽者设备则以较短的两次震动回应 | 在短时间内高亮两名玩家的轮廓或添加轻微光效边缘，强化「我们一起完成」的感受；总时长不超过 `{{COOP_EDGE_PULL_FEEDBACK_MS}}` 毫秒 |
| 协作失败（可重试） | 两名玩家的动作在关键帧被「打断」并过渡到打滑/落空/站不稳等失败动画，避免出现完全静止僵直；可适当加入石块滑落或尘土 | 播放一段较短的失败音效，包含轻微滑落/闷哼声，但避免尖锐或过长以防挫败感过高 | 给出一到两次节奏分明的震动（如「轻-重」），提示动作失败但仍可快速重试 | 镜头不做剧烈变化，保持对失败位置的清晰展示；若同一节点多次失败，可考虑在第三次后给出轻量提示（图标或短文案），不强制弹窗打断流程 |
| 体力即将耗尽（负重/背负时） | 背负者 Action_Bar 中被 Weight_Penalty 占据的体力段以较深颜色显示，并在可用体力低于 `{{COOP_STAMINA_LOW_THRESHOLD}}` 时开始轻微闪烁；角色移动/攀爬动作明显变慢 | 心跳和呼吸声在背负状态下更为明显，当接近体力阈值时叠加一层低频环境音，暗示当前处境危险 | 背负者设备以较低频率、节奏性的震动提示（如每 `{{COOP_STAMINA_WARN_INTERVAL_MS}}` 毫秒一次），持续时间短，避免干扰操作 | 当体力耗尽导致行动失败时，与《攀爬与移动》中体力失败反馈保持一致，强化「原因是体力/负重」的因果感，而非判定或网络问题 |

> 说明：本节覆盖与协作动作直接相关的反馈方案；与单人攀爬和体力相关的细节见《攀爬与移动》中的「反馈设计」小节。实际实现时，TA/音频可在此基础上细化具体资源与时长。
