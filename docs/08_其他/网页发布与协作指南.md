# 梦山 网页发布与协作指南

> **目标**: 通过网页浏览项目文档，并支持协作者在网页上查看与调整内容。
> **更新日期**: 2026-02-08

---

## 策划同学（零代码）如何更新文档并让网页/微信链接自动更新

**不写代码、只用浏览器**即可完成：在 GitHub 网页上改文档 → 提交为「合并请求」（PR）→ 合并到 main 后，网站会在几分钟内自动更新，分享出去的链接（含微信）会显示最新内容。

👉 **分步操作说明（点进去照着做即可）**：[策划更新操作流程（零代码版）](./策划更新操作流程.md)

---

## 1. 需求与方案概览

| 需求 | 说明 | 推荐做法 |
| :--- | :--- | :--- |
| **网页浏览** | 任何人通过浏览器查看项目文档（核心概念、企划、技术架构等） | 用静态站点生成器把 Markdown 转为网站，本地或内网/公网部署 |
| **协作者编辑** | 其他成员在网页上修改文档内容并生效 | 视权限与部署方式选择：Git 协作、Wiki 同步、或带编辑接口的小型文档服务 |

下面按「仅浏览」和「浏览 + 编辑」分别说明可选方案与落地步骤。

---

## 2. 网页浏览：如何发布成站

### 2.1 推荐：MkDocs（已在本项目中配置）

- **特点**：专为 Markdown 文档设计，支持中文、导航、搜索；配置简单，与现有 `.md` 结构兼容。
- **用法**：
  1. 在项目根目录安装依赖：`pip install -r requirements-docs.txt`
  2. 本地预览：`mkdocs serve`，浏览器打开 `http://127.0.0.1:8000`
  3. 生成静态站：`mkdocs build`，输出在 `site/`，可部署到任意静态托管（如 Nginx、GitHub Pages、对象存储+CDN）。

**配置文件**：项目根目录的 `mkdocs.yml` 已按「代号梦山」目录结构写好导航，可直接用。

### 2.2 其他可选工具

- **VitePress / Docusaurus**：适合需要更强前端定制或多语言站点；需 Node 环境。
- **GitBook（自托管）**：界面友好，需额外维护服务。

若只需「把现有 Markdown 当文档站发布」，MkDocs 足够且与当前仓库结构一致。

---

## 3. 协作者在网页上「调整内容」的几种方式

### 3.1 方式一：Git 仓库 + 网页编辑（零自建服务）

- **浏览**：用 MkDocs 生成站点，部署到 **GitHub Pages / GitLab Pages / Gitea Pages**，所有人通过链接访问。
- **编辑**：
  - 协作者在 **GitHub/GitLab 网页端** 直接编辑对应 `.md` 文件并提交（或提 PR）。
  - 或继续用 Cursor/VS Code 改本地仓库，推送到远程；文档站可在每次推送到主分支后自动重新构建（CI 里跑 `mkdocs build` 并发布）。

**优点**：无需自建编辑后台，版本历史完整，适合已有 Git 工作流的团队。  
**缺点**：编辑在 Git 网页/本地完成，不是「文档站内嵌的编辑器」。

**落地步骤**：
1. 将「代号梦山」所在仓库推到 GitHub/GitLab。
2. 在仓库设置中开启 Pages，源选择「从 main 分支的 /docs 或 mkdocs 输出目录」；若用 MkDocs，CI 中 build 到 `site/` 并发布该目录即可。
3. 协作者：克隆仓库 → 改 `.md` → 提交/PR；或直接在 GitHub/GitLab 网页上点「编辑」改单文件。**策划零代码更新**：见本站 [策划更新操作流程](./策划更新操作流程.md)，按「改文档 → 提 PR → 合并」即可，合并后网页与微信链接自动更新。

---

### 3.2 方式二：Wiki 平台（Outline / Wiki.js）同步 Markdown

- **思路**：把现有 Markdown 导入到 Outline 或 Wiki.js，在 Wiki 里浏览和编辑；若需与仓库一致，可定期从 Wiki 导出再回写到仓库（或仅把 Wiki 当「协作编辑前端」，仓库当发布源）。
- **适用**：希望编辑体验更接近「在线文档」、且能接受「以 Wiki 为源」或「定期同步」的团队。

**注意**：与当前「以文件系统为准」的流程会有双向同步或主数据源选择问题，需约定清楚。

---

### 3.3 方式三：自建「文档站 + 编辑接口」（进阶）

- **思路**：一个小型后端服务（如 Python FastAPI/Flask），提供：
  - 静态文档站（或反向代理到 MkDocs 生成的站点）；
  - 编辑接口：根据路径读取/写入 `docs/` 下 `.md` 文件；前端用简单 Markdown 编辑器（如 Easy MDE）提交保存。
- **权限**：通过登录、Token 或内网限制，只允许协作者访问编辑接口；写入前可做校验（如只允许改特定目录、禁止执行等）。

**优点**：真正「在文档站里点编辑、改完即生效」；数据仍在仓库目录，可配合 Git 提交。  
**缺点**：需要开发与部署维护，并做好权限与安全（避免未授权改文件）。

---

## 4. 推荐组合（满足「浏览 + 协作者调整」）

- **现阶段（低成本、快速上线）**  
  - **浏览**：用本项目已配好的 **MkDocs**，本地 `mkdocs serve` 或部署到 **GitHub Pages / 内网 Nginx**。  
  - **协作者调整**：用 **Git 协作**——协作者在 GitHub/GitLab 网页编辑对应 `.md`，或本地改完提 PR；CI 在推送到主分支后自动 `mkdocs build` 并更新站点。

- **若后续希望「在站内点编辑」**  
  - 再考虑 **方式三**：在现有 MkDocs 站点前加一层「编辑入口」+ 小型后端，只允许认证用户写回指定目录下的 `.md`，并配合 Git 提交或定时 commit。

---

## 5. 安全与权限注意

- 若文档站公网可访问：不要将仅内部分享的敏感信息（数值表、未公开企划）放在可被索引的页面，或对站点做访问控制（如 Basic Auth、VPN、内网）。
- 若提供「网页写回文件」的编辑接口：必须做身份校验与授权，并限制可写路径与操作类型，避免任意文件被改写或执行。

---

## 6. 小结

| 你要的 | 建议做法 |
| :--- | :--- |
| 先能网页浏览 | 使用本项目的 MkDocs 配置，执行 `mkdocs serve` 或 `mkdocs build` 后部署 `site/` |
| 协作者一起改内容 | 用 Git 仓库 + GitHub/GitLab 网页编辑或 PR，文档站用 CI 自动从仓库构建 |
| 将来要在站内编辑 | 可在此基础上增加「文档站 + 编辑 API」小服务，写回 `docs/` 下的 `.md` 并配合权限与 Git |

当前项目已具备 **MkDocs 配置与依赖说明**，按项目根目录的 `README-DOCS.md`（或本文 2.1）即可启动本地预览；发布与协作按上述组合选型即可满足「网页浏览 + 协作者调整内容」的发布要求。
