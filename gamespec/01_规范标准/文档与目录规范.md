# 文档与目录规范 / Documentation & Directory Standard

> **目标**: 统一全团队的文件管理习惯，确保文档的可读性、可维护性和工具兼容性。
> **适用**: 所有 GameSpec 下属的文档及游戏项目中的设计文档。

---
## 1. 目录结构规范 (Directory Structure)

### 1.1 GameSpec SDK 结构
以下是标准库的核心结构。GameSpec **允许** 用户在 `gamespec/` 根目录下新增其他自定义文件夹或文件。

```text
gamespec/
├── _元规范/               # [Architect] 架构师专区 (Core)
├── 00_使用指南/           # [Manual] 用户手册 (Core)
├── 01_规范标准/           # [Law] 核心法则 (Core)
├── 02_项目模板/           # [Template] 业务载体 (Core)
├── 03_智能助手/           # [Agent] AI Prompt (Core)
├── 04_自动化工具/         # [Tool] 脚本 (Core)
├── 06_技能合集/           # [Skill] 通用能力 (Core)
└── ...                    # [User] 用户自定义文件/文件夹 (Allowed)
```

**修改原则**: 
*   标有 `(Core)` 的目录为系统核心，建议保持原样以确保工具链正常工作。
*   用户可以在 `gamespec/` 下自由添加其他内容（如 `gamespec/My_Drafts/`），系统将予以尊重并读取。

### 1.2 游戏项目结构
项目文档建议与 `gamespec` 保持平级，但也 **允许 (MAY)** 存放在 `gamespec/` 内部或其他任何位置。

**命名要求**:
1.  **项目名称 (Project Name)**: 用于文档标题和展示，推荐使用中文（如《黑神话：悟空》）。
2.  **项目代号 (Project Codename)**: 必须是 **纯英文/数字/下划线**（如 `BlackMyth_Wukong`）。

**推荐的仓库结构 (Repository Structure)**:

```text
(Root)
├── gamespec/              # [SDK] 引入的标准库
├── 00_Project_Core/       # [CRITICAL] 项目核心 (绝对真理区)
└── Project_Codename/      # [Project] 标准项目文档 (推荐位置)
```

---
### 1.3 共享资源结构 (Shared Resources)
为了避免定义冗余，项目应统一引用标准库中的通用定义。

*   **通用机制库**: 位于 `gamespec/02_项目模板/通用机制库.md`。
    *   **引用方式**: 所有系统设计文档应使用相对路径引用。
*   **变量化引用**: 涉及数值时，必须使用 `{{VAR}}` 格式，并确保相关配置表存在。

---
## 2. 特殊目录：项目核心 (Project Core)

GameSpec 定义了一个具有**最高法律效力**的特殊目录。

### 2.1 定义与位置
*   **目录名**: 必须命名为 `00_Project_Core` 或 `00_项目核心`。
*   **位置**: 必须位于项目根目录下（与 `gamespec/` 平级）。

### 2.2 核心文档清单 (The Constitution)
必须包含以下核心文件：
1.  **Vision (愿景)**: 决定游戏的方向。
2.  **Pillars (支柱)**: 决定设计的优先级。
3.  **Loops (循环)**: 决定玩法的闭环。
4.  **ResourceFlow (资源流)**: 决定数值的健康度。
5.  **SystemArch (系统架构)**: 决定模块的边界与依赖。

### 2.3 法律地位 (Legal Status)
1.  **绝对真理 (The Absolute Truth)**: 该目录下的所有文档被视为项目的“宪法”或“圣经”。
2.  **强制性 (Mandatory)**: 每个正规项目必须包含此目录。
3.  **不可违背 (Inviolable)**: 项目中其他任何文档（包括 AI 生成的、用户自定义的）均**不得**包含与此目录相冲突的设定或逻辑。
4.  **基石作用 (Foundation)**: 在创建任何新文档前，必须优先读取并理解此目录下的所有内容。

### 2.4 冲突处理 (Conflict Resolution)
如果智能助手发现新需求或旧文档与 [Project Core] 中的内容冲突，必须：
*   **停止执行**：暂停当前设计任务。
*   **发出警告**：明确指出冲突点（例如：“新需求要求主角是女性，但核心文档《角色设定》中明确主角只能是男性。”）。
*   **请求裁决**：要求用户要么修改需求，要么修改 [Project Core]。

---
## 3. 命名规范 (Naming Convention)

### 3.1 文件与目录
为了兼容性和可读性，遵循以下原则：

*   **推荐**: 使用 **中文** 进行语义描述，使用 **数字前缀** 进行排序。
    *   ✅ `01_战斗系统.md`
    *   ✅ `02_公会系统.md`
*   **连接符**: 使用 **下划线 `_`** 分隔。
    *   ❌ `战斗-系统.md` (容易被某些解析器误读)
*   **资源文件**: 图片资源建议使用英文或拼音，避免路径乱码。
    *   ✅ `images/combat_flow_01.png`

### 3.2 内部 ID 命名
在文档和配置表中使用的唯一标识符。

| 类型 | 格式 | 示例 |
| :--- | :--- | :--- |
| **模块** (L1) | `MOD_[NAME]` | `MOD_SOCIAL` |
| **系统** (L2) | `SYS_[NAME]` | `SYS_GUILD` |
| **功能** (L3) | `FEAT_[NAME]` | `FEAT_GUILD_JOIN` |
| **规则** | `RULE_[SYS]_[NAME]` | `RULE_GUILD_LIMIT` |
| **关卡** | `LVL_[CH]_[NUM]` | `LVL_01_005` |
| **本地化** | `LOC_[SYS]_[KEY]` | `LOC_GUILD_NAME` |

---
## 4. 文档结构规范 (Document Structure)

所有设计文档 **必须 (MUST)** 包含以下要素：

### 4.1 元信息 (Frontmatter)
位于文件最顶部的 YAML 块。

```yaml
---
id: SYS_COMBAT
version: 1.2.0
author: 张三
updated: 2023-10-01
---
```

### 4.2 核心章节 (Core Sections)
根据《系统设计规范 v2.1》，一个完整的文档必须包含：
1.  **逻辑架构**: 数据结构、流程图。
2.  **原子规则**: 具体的逻辑定义。
3.  **依赖接口**: 上下游关系。
4.  **内容需求**: 配表与美术资源。
5.  **运营验收**: 埋点与指标。
6.  **异常边界**: 兜底逻辑。

---
## 5. 引用与链接 (Referencing)

### 5.1 文档间引用
*   **规则**: 必须使用 **相对路径**。
*   **原因**: 确保文档在不同电脑、不同仓库路径下都能通过点击跳转。
*   **示例**: `详见 [战斗公式](../03_数值配置/战斗公式.md)`

### 5.2 图片引用
*   **位置**: 图片统一存放在文档同级的 `images/` 目录，或项目根目录的 `Assets/` 目录。
*   **格式**: `![说明](images/xxx.png)`

### 5.3 魔法数字 (Magic Numbers)
*   **禁止**: 在正文中直接写 `100`、`5.5` 等具体数值。
*   **必须**: 使用 `{{VAR_NAME}}` 占位符，并在文档末尾或 Excel 中定义其值。

---
## 6. 自定义与兼容 (Custom & Compatibility)

GameSpec 承认用户有权按照自己的习惯组织文件。为实现“有序的混乱”，我们采用 **“严进宽出” (Strict Output, Open Input)** 原则。

### 6.1 用户自定义空间 (User Space)
*   **定义**: 项目根目录下，**包括 `gamespec/` 目录本身**，用户均有权创建自定义文件夹或文件。
*   **权限**: 用户可以在任意位置创建任意命名、任意深度的文件夹结构。
*   **格式**: 用户手动编写的文档，允许不完全符合 GameSpec 的 Frontmatter 或章节规范。

### 6.2 智能助手行为准则 (Agent Protocol)
1.  **全局扫描 (Global Scanning)**: 助手启动任务前，必须扫描**整个项目根目录（包括 gamespec/ 内部的用户文件夹）**。
2.  **宽容解析 (Lenient Parsing)**: 
    *   遇到非标文档（无 YAML 头、命名不规范），**严禁报错或拒读**。
    *   必须尝试提取其中的有效业务逻辑（Lore、数值、规则），并将其视为有效的项目上下文。
    *   原则：**“虽然你写得不规范，但我誓死捍卫你设定的内容。”**\n3.  **合规输出 (Compliant Output)**:
    *   助手**自身生成**的新文档，必须严格遵守 GameSpec 的目录规范（如 `01_核心系统/`）和格式规范（Frontmatter + 章节）。
    *   **例外**: 仅在用户明确指令（Force）要求写入非标路径时，才可破例。
