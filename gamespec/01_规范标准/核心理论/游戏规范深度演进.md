# GameSpec 深度规范演进规划 (The Deep Spec Initiative)

> **目标**：将 GameSpec 从一套单纯的“文档格式标准”升级为一套“游戏设计元语言”和“方法论体系”。不仅规范“怎么写”，更规范“怎么设计”和“什么是好设计”。

---

## 1. 核心愿景 (Vision)

目前的 GameSpec 解决了**结构化**的问题（把内容填在哪里）。
新的 Deep Spec 旨在解决**质量与逻辑**的问题（如何设计出好的内容）。

这将建立一个**人机协作的专家系统**，让 AI 不仅仅是文档的搬运工，更是懂得游戏设计原理的辅助设计师。

## 2. 实施路线图 (Roadmap)

### 第一阶段：构建“设计原语” (Defining Design Primitives)
这一阶段不涉及具体文档，而是定义游戏设计的“原子单位”。

1.  **定义 MDA 映射层**：
    *   引入 **Mechanics (机制)**、**Dynamics (动态)**、**Aesthetics (美学/体验)** 的分层定义标准。
    *   **任务**：创建一个 `core/design_patterns.md`，定义标准设计模式（如：风险/回报机制、正/负反馈循环）。
2.  **扩充语义标签 (Semantic Tags)**：
    *   不再只是写数值，而是标注设计意图。
    *   例如：`Tag: [Pacing: High-Tension]`, `Tag: [Reward: Intrinsic]`, `Tag: [Feedback: Juiciness]`.
    *   **任务**：制定一套设计意图的标注语言。
3.  **建立设计自查模型 (Heuristic Checklists)**：
    *   **核心理念**：对于没有绝对最优解的设计，通过结构化提问强制策划思考设计后果。
    *   **执行方式**：
        *   **常识层（Best Practices）**：对于行业公认的最优解（如 3C 基础响应），直接提供标准参考值，偏离需提供理由。
        *   **决策层（Trade-offs）**：对于设计抉择，要求显式声明“风险与回报”。例如：“设计了一个 2秒前摇的技能（风险），是为了提供秒杀小怪的爽感（结果）”。

### 第二阶段：垂直领域的深层重构 (Vertical Deep-Dive)
针对现有目录，逐个注入方法论规范。

#### 2.1 系统 (Systems) → 循环与反馈 (Loops & Feedback)
*   **不仅是规则**，必须定义 **Core Loop (核心循环)** 和 **Compulsion Loop (驱动循环)**。
*   **规范要求**：每个系统文档必须包含一张 Mermaid 格式的资源流转图 (Source/Sink)，证明系统是闭环的。

#### 2.2 数值 (Numerics) → 模型与边界 (Models & Constraints)
*   **不仅是配表**，必须包含 **数学模型证明**。
*   **规范要求**：
    *   必须定义“基准单位”（如：标准战斗时长、标准击杀收益）。
    *   必须定义“通胀控制模型”（如：每级属性膨胀率固定为 1.15）。

#### 2.3 关卡 (Levels) → 节奏与引导 (Pacing & Guidance)
*   **不仅是流程**，必须包含 **强度曲线图** 和 **引导策略**。
*   **规范要求**：
    *   必须使用“理性关卡设计”方法（Rational Level Design），标注每个区域的原子玩法（Atomic Gameplay）。
    *   必须定义“地标逻辑”和“视觉引导线”。

#### 2.4 叙事 (Narrative) → 结构与情感 (Structure & Emotion)
*   **不仅是对话**，必须包含 **叙事节拍 (Story Beats)**。
*   **规范要求**：
    *   符合“英雄之旅”或类似结构的标准检查点。
    *   定义每个任务的“情感目标”（如：疑惑 -> 惊讶 -> 满足）。

### 第三阶段：工具化与验证 (Tooling & Validation) [已完成]
规范如果只写在纸上，没人（也没 AI）会完全遵守。必须代码化。

1.  **开发 `openspec-lint` 插件**：
    *   编写自定义规则，不仅检查 Markdown 格式，还要检查设计逻辑。
    *   例如：*“检测到 boss 战设计，但未定义‘狂暴阶段’，报错：违反 Boss 设计规范 v1.2”。*
2.  **创建 AI 辅助生成器**：
    *   利用 Task 工具，输入：“生成一个符合标准的高难关卡”。
    *   AI 严格遵循定义的“强度曲线”和“原子玩法”来填充内容。
3.  **可视化设计仪表盘**：
    *   读取所有的 spec 文件，自动生成游戏的整体“心流图”或“经济循环图”。

### 第四阶段：实战落地 (Reference Project) [已完成]
> **Reference Case**: 最小可行性案例 (MVP Case)
1.  选择一个最小可行性案例（MVP）。
2.  严格按照新规范重写 spec。
3.  对比开发效率和产出质量。

### 第五阶段：核心优化与固化 (Core Optimization & Hardening)
基于 Reference Case 的实战反馈，对框架进行深度优化。

1.  **全局语言与配置强制 (Global Configuration)**
    *   **问题**：Task Agent 曾出现幻觉（创造不存在的文件）及语言混乱（混用中英文）。
    *   **对策**：引入 `config.json` 或 `.openspecrc`，强制定义 `language` (e.g., "zh-CN") 和 `allow_file_creation` 权限。
2.  **Linting 2.0 (AST-based Parser)**
    *   **问题**：基于 Regex 的 linter 过于脆弱（如无法正确解析 `## I.` 与 `## 1.` 的层级差异）。
    *   **对策**：放弃 Regex，采用基于 AST (Abstract Syntax Tree) 的 Markdown 解析器，实现更健壮的结构校验。

---

## 3. 待决策问题 (Open Questions)

在推进过程中，需要时刻回顾以下问题：

1.  **目标受众**：主要是 AI Agent，还是人类策划，还是混合协作？
2.  **覆盖广度**：先聚焦垂直品类（RPG/ACT），还是直接做通用层？
3.  **规范形态**：纯文本指导，还是可执行的代码/逻辑检查？

---

*Created: 2026-01-23*
