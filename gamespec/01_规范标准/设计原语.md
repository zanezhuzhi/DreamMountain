# 设计原语：MDA 映射层 (Design Primitives: MDA Mapping)

> 本文档定义了 GameSpec 体系下的核心设计原语，将经典的 MDA (Mechanics-Dynamics-Aesthetics) 框架映射为可验证的规范格式。

---

## 1. 核心定义 (Core Definitions)

GameSpec 遵循 **“体验优先” (Experience First)** 的设计原则。我们自顶向下地定义游戏：先明确目标（体验），再设计系统（动态），最后落实规则（机制）。

| 层次 (Layer) | 角色 (Role) | 定义 (Definition) | GameSpec 对应物 (Artifact) |
| :--- | :--- | :--- | :--- |
| **体验 (Aesthetics)** | **目标 (Goal)** | 玩家在交互过程中产生的情感反应。设计的起点。 | `Experience Goal` (体验目标), `Pacing` (节奏), `Scenario` (场景) |
| **动态 (Dynamics)** | **过程 (Process)** | 机制在运行时相互作用产生的系统行为。承上启下的桥梁。 | `System` (系统), `Loop` (循环), `State Machine` (状态机) |
| **机制 (Mechanics)** | **支撑 (Support)** | 游戏的代码、数据、算法和基础规则。实现的底层。 | `Rule` (规则), `Formula` (公式), `Config` (配置表) |

---

## 2. 体验层 (Aesthetics) - 目标与感受

体验是设计的**输入**。在 spec 中，我们通过“意图标签”和“验收场景”来描述。

### 2.1 体验标签 (Aesthetic Tags)
使用标准化的标签来标注设计意图，帮助 AI 理解“为什么这样设计”。

*   **分类**:
    *   `[Sensation]` (感官): 视觉、听觉的直接刺激 (e.g., `Juicy`, `Dark`)
    *   `[Fantasy]` (幻想): 扮演和世界观沉浸 (e.g., `Heroic`, `Mystery`)
    *   `[Challenge]` (挑战): 技能掌握与克服困难 (e.g., `Hardcore`, `Puzzle`)
    *   `[Social]` (社交): 合作与竞争 (e.g., `Coop`, `Competitive`)
    *   `[Discovery]` (探索): 未知与惊喜 (e.g., `Exploration`, `Secret`)

### 2.2 情感目标 (Emotional Goals)
每个系统或关卡必须声明其预期的情感曲线。

*   **语法**: `**情感目标**: [情感序列]`
*   **示例**:
    ```markdown
    **情感目标**: 压抑 (Tension) -> 释放 (Release) -> 满足 (Satisfaction)
    ```

---

## 3. 动态层 (Dynamics) - 循环与流转

动态是设计的**运行**。在 spec 中，我们需要描述系统如何随时间变化以支撑体验。

### 3.1 核心循环 (Core Loops)
*   **定义**: 玩家最频繁执行的行为序列。
*   **语法**: 使用 Mermaid 流程图或步骤列表定义。
*   **标注**: 必须标注 `[Action]` (行动) 和 `[Reward]` (奖励)。
*   **示例**:
    ```markdown
    ### 动态: 战斗循环
    1. 玩家发起攻击 (Action)
    2. 敌人扣除生命
    3. 敌人死亡
    4. 掉落金币 (Reward)
    ```

### 3.2 资源经济 (Resource Economy)
*   **定义**: 资源的产生 (Source)、消耗 (Sink) 和转换 (Converter)。
*   **规范**: 必须在设计文档中明确每个系统的 Source 和 Sink。

---

## 4. 机制层 (Mechanics) - 规则与数据

机制是设计的**支撑**。在 spec 中，它们必须是明确的、无歧义的陈述。

### 4.1 原子规则 (Atomic Rules)
*   **语法**: `### 规则: [名称]`
*   **要求**: 必须使用 `MUST` (必须) 或 `SHOULD` (应该) 定义。
*   **示例**:
    ```markdown
    ### 规则: 伤害计算
    攻击造成的伤害 **必须 (MUST)** 等于 `(攻击力 - 防御力) * 暴击倍率`。
    ```

### 4.2 实体属性 (Entity Properties)
*   **语法**: 定义在数值规范或配置表引用中。
*   **要求**: 必须定义取值范围 (Range) 和默认值 (Default)。

---

## 5. 映射关系验证 (Mapping Validation)

为了确保设计的一致性，GameSpec 要求进行自顶向下的验证：

1.  **A->D 验证 (目标验证)**: 动态层是否支撑体验目标？
    *   *检查*: 核心循环的奖励频率（动态）是否符合爽快感（体验）的要求？
2.  **D->M 验证 (实现验证)**: 机制层是否实现了动态逻辑？
    *   *检查*: 是否所有循环步骤都有对应的规则代码支持？

---

*Version 1.0 - [Phase 1] Design Primitives*
